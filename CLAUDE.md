# CLAUDE.md

æœ¬æ–‡ä»¶ä¸º Claude Code (claude.ai/code) æä¾›æœ¬ä»“åº“çš„å¼€å‘æŒ‡å—ã€‚

**GitHub ä»“åº“**: https://github.com/DigOrange/desklab

## é¡¹ç›®æ¦‚è¿°

DeskLabï¼ˆä¸ªäººå·¥ä½œå°ï¼‰æ˜¯ä¸€æ¬¾æ¡Œé¢ç«¯ä¸ªäººåŠ©ç†åº”ç”¨ï¼Œç”¨äºçŸ¥è¯†ã€æ–‡ä»¶å’Œå·¥ä½œç®¡ç†ã€‚æ ¸å¿ƒä½“éªŒæ˜¯æ‰€è§å³æ‰€å¾—ç¼–è¾‘å™¨ï¼Œæ”¯æŒ Markdown å­˜å‚¨ã€AI å¯¹è¯å’Œå¯æ‰©å±•æ¶æ„ã€‚

**æ ¸å¿ƒç‰¹æ€§ï¼š**
- æ¡Œé¢åº”ç”¨ï¼Œæ”¯æŒ macOS å’Œ Windows
- æœ¬åœ°ä¼˜å…ˆï¼Œæ”¯æŒç¦»çº¿ä½¿ç”¨
- ä»…ä¾›ä¸ªäººä½¿ç”¨ï¼ˆæ— åä½œåŠŸèƒ½ï¼‰
- æ‰€æœ‰ä¾èµ–å¿…é¡»æ˜¯å¼€æºåè®®ï¼ˆMIT/Apache/BSDï¼‰

## æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ |
|------|------|
| æ¡Œé¢è¿è¡Œæ—¶ | Tauri 2 + Rust |
| å‰ç«¯æ¡†æ¶ | React 18 + Vite 5 + TypeScript 5 |
| çŠ¶æ€ç®¡ç† | Zustand 4.5 |
| è·¯ç”± | React Router DOM 7.12 |
| å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ | Tiptap 3.15 (åŸºäº ProseMirror) |
| ç”»å¸ƒ | Excalidraw 0.18 |
| æ€ç»´å¯¼å›¾ | simple-mind-map 0.14 |
| å›¾è¡¨ | Mermaid 11.12 |
| æ•°æ®åº“ | SQLiteï¼ˆå…ƒæ•°æ®/å…³ç³»ï¼‰ |
| å…¨æ–‡æœç´¢ | SQLite FTS5 |
| å‘é‡æœç´¢ | sqlite-vec |
| åµŒå…¥æ¨¡å‹ | ONNX Runtime (all-MiniLM-L6-v2, 384 ç»´) |
| PDF è§£æ | pdf.js |
| Word è§£æ | mammoth |
| Markdown è§£æ | marked + turndown |
| å›¾ç‰‡ç¼©ç•¥å›¾ | Rust image crate |
| **AI ä¸»è¦** | **Claude API** (`@anthropic-ai/sdk@^0.71.2`) |
| AI å¯é€‰ | Ollama (æœ¬åœ°) / é€šä¹‰ / è±†åŒ… / DeepSeek / ç¡…åŸºæµåŠ¨ |

## æ¶æ„

### æºä»£ç ç»“æ„
```
src/
â”œâ”€â”€ main.tsx                 # åº”ç”¨å…¥å£
â”œâ”€â”€ App.tsx                  # æ ¹ç»„ä»¶
â”œâ”€â”€ router.tsx               # è·¯ç”±é…ç½®
â”œâ”€â”€ components/              # å…¬å…±ç»„ä»¶
â”‚   â”œâ”€â”€ common/              # é€šç”¨ UI ç»„ä»¶ (Dialog, ContextMenu, ConfirmDialog)
â”‚   â””â”€â”€ search/              # æœç´¢ç»„ä»¶ (SearchDialog)
â”œâ”€â”€ features/                # åŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ canvas/              # Excalidraw ç”»å¸ƒ
â”‚   â”œâ”€â”€ editor/              # Tiptap å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
â”‚   â”œâ”€â”€ mindmap/             # æ€ç»´å¯¼å›¾ (simple-mind-map)
â”‚   â”œâ”€â”€ ppt/                 # PPT æ¼”ç¤ºæ–‡ç¨¿
â”‚   â”œâ”€â”€ project/             # é¡¹ç›®ç®¡ç†
â”‚   â”œâ”€â”€ search/              # æœç´¢åŠŸèƒ½
â”‚   â”œâ”€â”€ studio/              # AI å·¥ä½œå®¤ (èŠå¤©ã€æ¥æºç®¡ç†)
â”‚   â””â”€â”€ workspace/           # å·¥ä½œåŒºä¾§è¾¹æ 
â”œâ”€â”€ pages/                   # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ HomePage.tsx         # é¦–é¡µï¼ˆé¡¹ç›®åˆ—è¡¨ï¼‰
â”‚   â””â”€â”€ StudioPage.tsx       # å·¥ä½œå®¤é¡µé¢
â”œâ”€â”€ services/                # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ ai/                  # AI æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ claudeService.ts # Claude API å®ç°
â”‚   â”‚   â”œâ”€â”€ ollamaService.ts # Ollama å®ç°
â”‚   â”‚   â”œâ”€â”€ types.ts         # AI ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts         # å¯¼å‡ºå’Œå·¥å‚å‡½æ•°
â”‚   â”œâ”€â”€ keychain.ts          # å¯†é’¥ç®¡ç†ï¼ˆç³»ç»Ÿé’¥åŒ™ä¸²ï¼‰
â”‚   â””â”€â”€ export.ts            # å¯¼å‡ºæœåŠ¡
â”œâ”€â”€ types/                   # å…¨å±€ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ chat.ts              # èŠå¤©å’Œ AI é…ç½®ç±»å‹
â”‚   â”œâ”€â”€ canvas.ts            # ç”»å¸ƒç±»å‹
â”‚   â”œâ”€â”€ mindmap.ts           # æ€ç»´å¯¼å›¾ç±»å‹
â”‚   â”œâ”€â”€ ppt.ts               # PPT ç±»å‹
â”‚   â”œâ”€â”€ note.ts              # ç¬”è®°ç±»å‹
â”‚   â”œâ”€â”€ project.ts           # é¡¹ç›®ç±»å‹
â”‚   â”œâ”€â”€ source.ts            # æ¥æºç±»å‹
â”‚   â””â”€â”€ studio.ts            # å·¥ä½œå®¤ç±»å‹
â”œâ”€â”€ hooks/                   # å…¬å…± hooks
â”œâ”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”œâ”€â”€ data/                    # é™æ€æ•°æ®
â””â”€â”€ styles/                  # å…¨å±€æ ·å¼
```

### æ ¸å¿ƒæ¨¡å—
- **ç¼–è¾‘å™¨æ¨¡å—** (`features/editor/`)ï¼šTiptap ç¼–è¾‘å™¨ï¼Œæ”¯æŒ Markdown åŒå‘åŒæ­¥ã€è‡ªåŠ¨ä¿å­˜ã€æœç´¢
- **ç”»å¸ƒæ¨¡å—** (`features/canvas/`)ï¼šExcalidraw ç™½æ¿é›†æˆ
- **æ€ç»´å¯¼å›¾æ¨¡å—** (`features/mindmap/`)ï¼šsimple-mind-map æ€ç»´å¯¼å›¾é›†æˆ
- **PPT æ¨¡å—** (`features/ppt/`)ï¼šæ¼”ç¤ºæ–‡ç¨¿ç¼–è¾‘å™¨ï¼Œæ”¯æŒå¹»ç¯ç‰‡ã€ä¸»é¢˜ã€å¯¼å‡º
- **å·¥ä½œå®¤æ¨¡å—** (`features/studio/`)ï¼šAI èŠå¤©ç•Œé¢ã€æ¥æºç®¡ç†ã€é¢æ¿å¸ƒå±€
- **é¡¹ç›®æ¨¡å—** (`features/project/`)ï¼šé¡¹ç›®å¢åˆ æ”¹æŸ¥ã€é¡¹ç›®å¡ç‰‡ã€å›¾æ ‡é€‰æ‹©å™¨
- **å·¥ä½œåŒºæ¨¡å—** (`features/workspace/`)ï¼šä¾§è¾¹æ å¯¼èˆªã€å·¥ä½œåŒºç®¡ç†
- **æœç´¢æ¨¡å—** (`features/search/`)ï¼šç»Ÿä¸€æœç´¢ç•Œé¢

### æ•°æ®ç›®å½•ç»“æ„
```
vault/           # Markdown æ–‡æ¡£å’Œèµ„æºæ–‡ä»¶
  canvas/        # ç”»å¸ƒæ–‡ä»¶ (*.canvas.json)
  mindmap/       # æ€ç»´å¯¼å›¾æ–‡ä»¶ (*.mindmap.json)
  ppt/           # PPT æ–‡ä»¶ (*.ppt.json)
db/              # SQLite æ•°æ®åº“ï¼ˆç´¢å¼•/å…³ç³»/ä»»åŠ¡ï¼‰
cache/           # ç¼©ç•¥å›¾å’Œè§£æç¼“å­˜
  canvas/        # ç”»å¸ƒç¼©ç•¥å›¾
plugins/         # å¯æ‰©å±•æ’ä»¶
```

### æ–‡ä»¶å¯¼å…¥æµç¨‹
**å¯¼å…¥æ–¹å¼ï¼š**
- æ‹–æ”¾æ–‡ä»¶åˆ°å¯¼å…¥åŒºåŸŸï¼ˆStudio DropZoneï¼‰
- é€šè¿‡å¯¹è¯æ¡†é€‰æ‹©å•ä¸ª/å¤šä¸ªæ–‡ä»¶
- é€‰æ‹©æ–‡ä»¶å¤¹ï¼ˆé€’å½’æ‰«ææ”¯æŒçš„ç±»å‹ï¼špdf, docx, jpg, jpeg, png, gif, webp, mdï¼‰

**å¤„ç†æµç¨‹ï¼š**
1. è¯†åˆ«ç±»å‹ â†’ ç”Ÿæˆé¢„è§ˆ/ç¼©ç•¥å›¾
2. Word/PDF è½¬æ¢ä¸º Markdown ç”¨äºç¼–è¾‘
3. æå–æ–‡æœ¬ï¼ˆPDF/Word/OCRï¼‰
4. å†™å…¥ SQLite å…ƒæ•°æ®
5. æ›´æ–°å…¨æ–‡/å‘é‡ç´¢å¼•
6. å¯ç”¨äº AI/RAG å’Œæœç´¢

## å…³é”®è®¾è®¡å†³ç­–

| é¢†åŸŸ | å†³ç­– | ç†ç”± |
|------|------|------|
| ç¼–è¾‘å™¨ | Tiptap 3.x | æˆç†Ÿç”Ÿæ€ã€ä¸°å¯Œæ’ä»¶ã€åŸºäº ProseMirror |
| ç”»å¸ƒ | Excalidraw | MIT åè®®ã€æ˜“äºé›†æˆã€åŠŸèƒ½ä¸°å¯Œ |
| æ€ç»´å¯¼å›¾ | simple-mind-map | è½»é‡ã€åŠŸèƒ½ä¸°å¯Œã€æ´»è·ƒå¼€å‘ |
| çŠ¶æ€ç®¡ç† | Zustand | ç®€å•ã€è½»é‡ã€TypeScript å‹å¥½ |
| **AI ä¸»è¦** | **Claude API** | å®˜æ–¹ SDKã€å¼ºå¤§å·¥å…·è°ƒç”¨ã€ç¨³å®šæµå¼è¾“å‡º |
| AI å¯é€‰ | Ollama / é€šä¹‰ / è±†åŒ…ç­‰ | Provider Adapter æ¨¡å¼æä¾›çµæ´»æ€§ |
| .doc æ–‡ä»¶ | å»¶è¿Ÿåˆ° v1.1 | LibreOffice ä¾èµ–å¤ªé‡ |
| HEIC å›¾ç‰‡ | å»¶è¿Ÿåˆ° v1.1 | è·¨å¹³å°æ‰“åŒ…å¤æ‚åº¦é«˜ |
| OCR | å¯é€‰æ’ä»¶ | Tesseract å¤ªå¤§ï¼Œäº‘ç«¯ API æ›´å‡†ç¡® |

## å½“å‰åŠŸèƒ½

1. **ç¼–è¾‘å™¨**ï¼šTiptap å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæ”¯æŒ Markdown åŒæ­¥ã€å·¥å…·æ ã€çŠ¶æ€æ ã€æœç´¢
2. **ç”»å¸ƒ**ï¼šExcalidraw ç™½æ¿ï¼Œæ”¯æŒä¸»é¢˜åˆ‡æ¢ã€å¯¼å‡ºï¼ˆPNG/SVGï¼‰
3. **æ€ç»´å¯¼å›¾**ï¼šsimple-mind-mapï¼Œæ”¯æŒä¸»é¢˜ã€å¿«æ·é”®ã€å¯¼å‡ºï¼ˆPNG/SVG/PDF/Markdownï¼‰
4. **PPT**ï¼šæ¼”ç¤ºæ–‡ç¨¿ç¼–è¾‘å™¨ï¼Œæ”¯æŒå¹»ç¯ç‰‡ã€ä¸»é¢˜ã€å…ƒç´ ç¼–è¾‘ã€å¯¼å‡º
5. **AI å·¥ä½œå®¤**ï¼šå¤šä¼šè¯èŠå¤©ã€æ¥æºç®¡ç†ã€å¼•ç”¨æ ‡æ³¨ã€æµå¼å“åº”
6. **é¡¹ç›®ç®¡ç†**ï¼šé¡¹ç›®å¢åˆ æ”¹æŸ¥ã€å›¾æ ‡é€‰æ‹©å™¨ã€é¡¹ç›®å¡ç‰‡
7. **æœç´¢**ï¼šå…¨å±€æœç´¢å¯¹è¯æ¡†ï¼Œæ”¯æŒé”®ç›˜å¿«æ·é”®

## AI æä¾›æ–¹é…ç½®

ä½¿ç”¨ Provider Adapter æ¨¡å¼ç»Ÿä¸€ AI æ¥å£ã€‚

### æ”¯æŒçš„æä¾›æ–¹

| æä¾›æ–¹ | çŠ¶æ€ | æœåŠ¡æ–‡ä»¶ |
|--------|------|----------|
| Claude API | âœ… å·²å®ç° | `src/services/ai/claudeService.ts` |
| Ollama | âœ… å·²å®ç° | `src/services/ai/ollamaService.ts` |
| é€šä¹‰åƒé—® | ğŸš§ è®¡åˆ’ä¸­ | - |
| è±†åŒ… | ğŸš§ è®¡åˆ’ä¸­ | - |
| DeepSeek | ğŸš§ è®¡åˆ’ä¸­ | - |
| ç¡…åŸºæµåŠ¨ | ğŸš§ è®¡åˆ’ä¸­ | - |

### Claude APIï¼ˆä¸»è¦ï¼‰
- **SDK**ï¼š`@anthropic-ai/sdk@^0.71.2`
- **æ¨¡å‹**ï¼š
  - `claude-sonnet-4-20250514`ï¼ˆå¹³è¡¡ï¼Œé»˜è®¤ï¼‰
  - `claude-opus-4-20250514`ï¼ˆæœ€å¼ºèƒ½åŠ›ï¼‰
- **åŠŸèƒ½**ï¼šæµå¼è¾“å‡ºã€ç³»ç»Ÿæç¤ºè¯ã€ä¸Šä¸‹æ–‡/RAG æ”¯æŒ

### Ollamaï¼ˆæœ¬åœ°ï¼‰
- **é»˜è®¤åœ°å€**ï¼š`http://localhost:11434`
- **æ¨èæ¨¡å‹**ï¼šllama3.2, qwen2.5, deepseek-r1, mistral
- **åŠŸèƒ½**ï¼šè‡ªåŠ¨æ£€æµ‹æ¨¡å‹ã€åœ¨çº¿çŠ¶æ€æ£€æŸ¥

### TypeScript æ¥å£
```typescript
// src/services/ai/types.ts
export interface AiProvider {
  chatStream(messages: ChatServiceMessage[], context?: string): AsyncGenerator<ChatStreamChunk>;
  chat(messages: ChatServiceMessage[], context?: string): Promise<string>;
}

// src/services/ai/index.ts - å·¥å‚å‡½æ•°
export function createAiProvider(config: ProviderConfig): AiProvider;
```

### é…ç½®å­˜å‚¨
- **API å¯†é’¥**ï¼šç³»ç»Ÿé’¥åŒ™ä¸²ï¼Œé€šè¿‡ `src/services/keychain.ts`
- **å…¶ä»–é…ç½®**ï¼šLocalStorageï¼ˆ`ai_config` é”®ï¼‰
- **ç±»å‹å®šä¹‰**ï¼š`src/types/chat.ts`

### è‡ªåŠ¨ Fallback æœºåˆ¶
å½“ç”¨æˆ·é…ç½®çš„ AI æä¾›æ–¹ä¸å¯ç”¨æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨åˆ‡æ¢åˆ°å…¶ä»–å·²é…ç½®çš„æä¾›æ–¹ï¼š

**ä¼˜å…ˆçº§é¡ºåº**ï¼š
1. ç”¨æˆ·é€‰æ‹©çš„æä¾›æ–¹ï¼ˆå¦‚æœå¯ç”¨ï¼‰
2. Ollamaï¼ˆå¦‚æœå·²è¿æ¥ä¸”æœ‰å¯ç”¨æ¨¡å‹ï¼‰
3. Claudeï¼ˆå¦‚æœå·²é…ç½® API Keyï¼‰

**å®ç°æ–‡ä»¶**ï¼š`src/features/studio/components/WorkspacePanel.tsx`

**æ ¸å¿ƒå‡½æ•°**ï¼š
- `validateAiConfig()` - æ£€æµ‹å¯ç”¨æä¾›æ–¹å¹¶ç¡®å®š fallback
- `createAiServiceWithFallback()` - åˆ›å»º AI æœåŠ¡å®ä¾‹ï¼Œè‡ªåŠ¨é€‰æ‹©å¯ç”¨æä¾›æ–¹

**ç”¨æˆ·ä½“éªŒ**ï¼š
- ç”Ÿæˆè¿‡ç¨‹ä¸­æ˜¾ç¤ºå®é™…ä½¿ç”¨çš„æä¾›æ–¹åç§°
- å‘ç”Ÿ fallback æ—¶åœ¨è¿›åº¦æç¤ºä¸­å‘ŠçŸ¥ç”¨æˆ·
- æ‰€æœ‰æä¾›æ–¹ä¸å¯ç”¨æ—¶æ˜¾ç¤ºæ˜ç¡®çš„é”™è¯¯æç¤º

## å¼€å‘

### å‘½ä»¤
```bash
pnpm dev          # å¯åŠ¨ Vite å¼€å‘æœåŠ¡å™¨
pnpm build        # TypeScript ç¼–è¯‘ + Vite æ„å»º
pnpm preview      # é¢„è§ˆç”Ÿäº§æ„å»º
pnpm tauri dev    # å¯åŠ¨ Tauri å¼€å‘æ¨¡å¼
pnpm tauri build  # æ„å»º Tauri åº”ç”¨
```

### æ–‡æ¡£
- `docs/requirements.md` - åŠŸèƒ½å’ŒéåŠŸèƒ½éœ€æ±‚ï¼ˆREQ-F-xxx, REQ-N-xxxï¼‰
- `docs/tech-solution.md` - æŠ€æœ¯æ¶æ„å’ŒæŠ€æœ¯æ ˆå†³ç­–
- `docs/ooa-analysis.md` - é¢å‘å¯¹è±¡åˆ†æï¼ŒåŒ…å«ç”¨ä¾‹å’Œé¢†åŸŸå¯¹è±¡
- `docs/å·¥ä½œæµç¨‹.md` - å¼€å‘å·¥ä½œæµç¨‹ï¼ˆ"äº”ä½ä¸€ä½“"äº¤ä»˜ä½“ç³»ï¼‰
- `docs/00_RTM.md` - éœ€æ±‚è¿½è¸ªçŸ©é˜µï¼ˆå”¯ä¸€çœŸç›¸æ¥æºï¼‰
- `docs/bugs.md` - å·²çŸ¥é—®é¢˜å’Œ Bug
- `docs/ui/` - HTML/CSS UI åŸå‹

### å¯ç”¨æŠ€èƒ½
| æŠ€èƒ½ | å‘½ä»¤ | ç”¨é€” |
|------|------|------|
| éœ€æ±‚åˆ†æå¸ˆ | `/requirements-analyst` | OORA å»ºæ¨¡ã€RTM ç»´æŠ¤ |
| æ¶æ„å¸ˆ | `/architect` | Rust/TS è¾¹ç•Œã€Tauri Command è®¾è®¡ |
| å‰ç«¯å¼€å‘ | `/frontend-dev` | React + Tiptap + Excalidraw |
| åç«¯å¼€å‘ | `/backend-dev` | Rust + Tauri + SQLite |
| ä»£ç å®¡æŸ¥ | `/code-reviewer` | å®¡è®¡ã€æµ‹è¯•ã€Sub-Agent å®¡æŸ¥ |

### å·¥ä½œæµç¨‹è§„åˆ™
- é¡ºåºæ‰§è¡Œï¼šéœ€æ±‚ â†’ è®¾è®¡ â†’ å¼€å‘ â†’ å®¡è®¡ â†’ æµ‹è¯•
- æ¯ä¸ªé˜¶æ®µéœ€è¦å®¡è®¡é€šè¿‡æ‰èƒ½ç»§ç»­
- å¤±è´¥é‡è¯• 2 æ¬¡ â†’ è®°å½•é—®é¢˜ â†’ è·³è¿‡ â†’ ç»§ç»­
- RTMï¼ˆ`docs/00_RTM.md`ï¼‰æ˜¯å”¯ä¸€çœŸç›¸æ¥æº
- **åŠŸèƒ½å®Œæˆåå¿…é¡»æ›´æ–°ç›¸å…³æ–‡æ¡£**ï¼š
  - Bug ä¿®å¤ â†’ æ›´æ–° `docs/bugs.md`
  - æ–°åŠŸèƒ½ â†’ æ›´æ–° `docs/requirements.md` å’Œ RTM
  - æ¶æ„å˜æ›´ â†’ æ›´æ–° `docs/tech-solution.md`
  - UI è°ƒæ•´ â†’ æ›´æ–°ç›¸å…³éœ€æ±‚æ–‡æ¡£æˆ– bugs.md

### ä»£ç é£æ ¼
- ä½¿ç”¨ `type` å¯¼å…¥ TypeScript ç±»å‹ï¼š`import type { Foo } from './bar'`
- å¸¸é‡æ•°ç»„æ ‡è®°ä¸º `readonly`
- æå–è¾…åŠ©å‡½æ•°å‡å°‘ä»£ç é‡å¤
- ä¿æŒç»„ä»¶èšç„¦å’Œå•ä¸€èŒè´£

### æ—¥å¿—ç®¡ç†è§„èŒƒ

**åŸºæœ¬åŸåˆ™**ï¼š
- ç¼–ç æ—¶å°±æ·»åŠ æ—¥å¿—ï¼Œä¸è¦ç­‰åˆ°è°ƒè¯•æ—¶æ‰åŠ 
- æ—¥å¿—æ˜¯æ’æŸ¥é—®é¢˜çš„ç¬¬ä¸€æ‰‹èµ„æ–™ï¼Œå¿…é¡»å®Œæ•´ã€æœ‰æ„ä¹‰
- å‰ç«¯å’Œåç«¯éƒ½è¦æœ‰æ—¥å¿—ä½“ç³»

**å‰ç«¯æ—¥å¿—ï¼ˆTypeScript/Reactï¼‰**ï¼š
```typescript
// ä½¿ç”¨ç»Ÿä¸€çš„æ—¥å¿—å‰ç¼€ï¼Œä¾¿äºè¿‡æ»¤
console.log('[æ¨¡å—å] æ“ä½œæè¿°:', æ•°æ®);
console.error('[æ¨¡å—å] é”™è¯¯æè¿°:', error);

// ç¤ºä¾‹
console.log('[NoteEditor] åŠ è½½ç¬”è®°:', noteId);
console.log('[ChatStore] å‘é€æ¶ˆæ¯, sessionId:', sessionId, 'contenté•¿åº¦:', content.length);
console.error('[AiService] API è°ƒç”¨å¤±è´¥:', error.message);
```

**åç«¯æ—¥å¿—ï¼ˆRustï¼‰**ï¼š
```rust
// ä½¿ç”¨å‡½æ•°åä½œä¸ºå‰ç¼€
println!("[å‡½æ•°å] æ“ä½œæè¿°: {:?}", æ•°æ®);

// ç¤ºä¾‹
println!("[project_list] å¼€å§‹è·å–æ‰€æœ‰é¡¹ç›®");
println!("[project_list] æˆåŠŸè·å– {} ä¸ªé¡¹ç›®", projects.len());
println!("[note_save] ä¿å­˜ç¬”è®°å¤±è´¥: {:?}", e);
```

**æ—¥å¿—çº§åˆ«**ï¼š
- **å…³é”®æ“ä½œ**ï¼šå‡½æ•°å…¥å£ã€å‡ºå£ã€é‡è¦çŠ¶æ€å˜åŒ–
- **å¼‚æ­¥æ“ä½œ**ï¼šå¼€å§‹ã€æˆåŠŸã€å¤±è´¥
- **é”™è¯¯å¤„ç†**ï¼šæ•è·çš„é”™è¯¯å¿…é¡»è®°å½•

**è°ƒè¯•æ—¶**ï¼š
- å…ˆæŸ¥çœ‹æ—¥å¿—è¾“å‡ºï¼ˆæµè§ˆå™¨æ§åˆ¶å° + Tauri ç»ˆç«¯ï¼‰
- æ ¹æ®æ—¥å¿—å®šä½é—®é¢˜æ¨¡å—
- æ·»åŠ æ›´è¯¦ç»†çš„æ—¥å¿—ç¼©å°èŒƒå›´

## Tauri 2.x å¼€å‘æ³¨æ„äº‹é¡¹

### ç¯å¢ƒæ£€æµ‹
Tauri 2.x é»˜è®¤ä¸æš´éœ² `window.__TAURI__`ï¼Œéœ€è¦æ£€æµ‹ `__TAURI_INTERNALS__`ï¼š
```typescript
// src/utils/tauri.ts
export const isTauri = (): boolean => {
  return typeof window !== 'undefined' &&
    ('__TAURI_INTERNALS__' in window || '__TAURI__' in window);
};
```

### å‰åç«¯ç±»å‹åŒæ­¥
Rust åç«¯ä½¿ç”¨ serde çš„ `rename` å±æ€§å°†å­—æ®µåºåˆ—åŒ–ä¸º camelCaseï¼š
```rust
#[serde(rename = "isStarred")]
pub is_starred: bool,
```

å‰ç«¯ TypeScript ç±»å‹**å¿…é¡»**ä½¿ç”¨ camelCase ä¸åç«¯ä¿æŒä¸€è‡´ï¼š
```typescript
// âœ… æ­£ç¡®
interface Project {
  isStarred: boolean;
  createdAt: string;
}

// âŒ é”™è¯¯
interface Project {
  is_starred: boolean;
  created_at: string;
}
```

### è°ƒè¯•æ—¥å¿—
åœ¨å…³é”®ä½ç½®æ·»åŠ æ—¥å¿—ä¾¿äºè°ƒè¯•ï¼š
- **åç«¯**ï¼šä½¿ç”¨ `eprintln!` è¾“å‡ºåˆ° stderrï¼ˆstdout å¯èƒ½è¢«ç¼“å†²ï¼‰
- **å‰ç«¯**ï¼šä½¿ç”¨ `console.log`ï¼Œåœ¨ Tauri åº”ç”¨ä¸­æŒ‰ `Cmd+Option+I` æ‰“å¼€ DevTools æŸ¥çœ‹

```rust
// åç«¯æ—¥å¿—ç¤ºä¾‹
eprintln!("[project_list] æˆåŠŸè·å– {} ä¸ªé¡¹ç›®", projects.len());
```

```typescript
// å‰ç«¯æ—¥å¿—ç¤ºä¾‹
console.log('[ProjectStore] fetchProjects æˆåŠŸ:', projects);
```

